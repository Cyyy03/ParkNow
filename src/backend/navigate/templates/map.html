{% extends 'base.html' %}
{% block content %}
{% load static %}

<style>
.mapholder {
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* This gives it a 16:9 aspect ratio */
    position: relative;
}

#map {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

@media (max-width: 600px) {
    .mapholder {
        padding-bottom: 75%; /* Adjusting for a different aspect ratio on small screens */
    }
}
</style>

<script>

    $(document).ready(function(){
        $.ajax({
            url: "{% url 'mydata'%}",
            method: 'GET',
            success: function (data) {
                console.log(data);
                initMap(data);
            }
      });
    });

    function initMap(data) {
       const map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: {lat: 51.5944418, lng: 4.7492914}
       });
       const markers = data?.map((i) => {
            const marker = new google.maps.Marker({
                position: { lat: parseFloat(i.latitude), lng: parseFloat(i.longitude)},
                map: map,
            });
        });

     }
</script>

<div class="pageholder">
    <div class="titleholder"> 
        <div class="title"><i class="fas fa-compass mr-2"></i> Google Maps #4: Markers on a map </div>
        <a href="{% url 'home'%}" class="title2 mr-4"><i class="fas fa-home mr-2"></i> Back to home </a>
    </div>

    <div class="linkholder">
        <div class="mapholder">
            <div id="map"></div>
            <script src="https://maps.googleapis.com/maps/api/js?key={{key}}&callback=initMap&v=weekly" defer></script>
        </div>
    </div>
</div>

{% endblock content %}
